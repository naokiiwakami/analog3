#define P_N1_MIDI_CHANNEL_OFFSET 0
#define P_L_VOICES_OFFSET        1
#define P_B_RETRIGGER_OFFSET     2
#define P_BUFFER_SIZE            3

static uint8_t p_buffer[P_BUFFER_SIZE];

#define P_N1_MIDI_CHANNEL (*(uint8_t*)&p_buffer[P_N1_MIDI_CHANNEL_OFFSET])
#define P_N1_MIDI_CHANNEL_VALUE_OFFSET 1

#define P_L_VOICES       (*(uint8_t*)&p_buffer[P_L_VOICES_OFFSET])
#define P_L_VOICES__MONO     0
#define P_L_VOICES__DUO      1
#define P_L_VOICES__POLY_4   2
#define P_L_VOICES__POLY_5   3
#define P_L_VOICES__POLY_6   4
#define P_L_VOICES__POLY_8   5
#define P_L_VOICES__POLY_10  6
#define P_L_VOICES__POLY_16  7

int id_offset = 1;


#define P_B_RETRIGGER (*(uint8_t*)&p_buffer[P_B_RETRIGGER_OFFSET])

{
    "name": "midigw",
    "type": "Module",
    "id": 1,
    "member": [
        {
            "name": "MIDI channel",
            "type": "NumberSelector",
            "id": 2,
            "min": 1,
            "max": 16
        },
        {
            "name": "Voices",
            "type": "Selector",
            "id": 3,
            "choices": ["mono", "duo", "poly 4", "poly 5", "poly 6", "poly 8", "poly 10", "poly 16"]
        },
        {
            "name": "Retrigger",
            "type": "Switch",
            "id": 4,
            "default": True
        }
    ]
}

{
    "name": "amplifier",
    "type": "Module",
    "id": 5,
    "member": [
        { "name": "Voice", "type": "Knob", "id": 6, "max": 15 },
        { "name": "Initial", "type": "Knob", "id": 7 },
        { "name": "Scale", "type": "Knob", "id": 8 },
        { "name": "Expression Sensitivity": "type": "Knob", "id": 9 },

        { "name": "Modulation", "type": "Input", "id": 10 }
    }
}

{
    "name": "envelope generator",
    "type": "Module",
    "id": 11,
    "member": [
        {
            "name": "Hit",
            "type": "Group",
            "id": 12,
            "member": [
                { "name": "Intensity", "type": "Knob", "id": 13 },
                { "name": "Velocity", "type": "Knob", "id": 14 }
            ]
        },
        {
            "name": "Attack",
            "type": "Group",
            "id": 15,
            "member": [
                { "name": "Initial Level", "type": "Knob", "id": 16 },
                { "name": "Velocity", "type": "Knob", "id": 17 },
                { "name": "Time", "type": "Knob", "id": 18 }
            ]
        },
        {
            "name": "1st Decay",
            "type": "Group",
            "id": 19,
            "member": [
                { "name": "Level", "type": "Knob", "id": 20 },
                { "name": "Time", "type": "Knob", "id": 21 }
            ]
        },
        {
            "name": "2nd Decay",
            "type" "Group",
            "id": 22,
            "member": [
                { "name": "Level", "type": "Knob", "id": 23 },
                { "name": "Velocity", "type" : "Knob", "id": 24 },
                { "name": "Time", "type": "Knob", "id": 25 }
            ]
        },
        { "name": "Release Time": "type": "Knob", "id": 26 },
    ]
}


defaults:
  - Knob
    - min: 0
    - max: 1023
    - preferredControl: Knob
    - default: 0
